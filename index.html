<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Urlaubs-Kalender â€“ Privat</title>

  <!-- PWA -->
  <link rel="manifest" href="./manifest.json" />
  <meta name="theme-color" content="#ffffff" />

  <!-- Better dark mode rendering on mobile -->
  <meta name="color-scheme" content="light dark" />

  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo" aria-hidden="true">ðŸ“…</div>
      <div>
        <div class="title">Urlaubs-Kalender</div>
      </div>
    </div>

    <div class="topbar-right">
      <!-- Primary actions (always in one clean row) -->
      <div class="primary-actions">
        <button id="btnToday" class="btn" type="button">Heute</button>
        <button id="btnAdd" class="btn btn-primary" type="button">+ Eintrag</button>
      </div>

      <!-- Hamburger menu -->
      <div class="menu-wrap">
        <button
          id="btnMenu"
          class="icon-btn"
          type="button"
          aria-label="MenÃ¼ Ã¶ffnen"
          aria-haspopup="menu"
          aria-expanded="false"
          aria-controls="topbarMenu"
        >â˜°</button>

        <div id="topbarMenu" class="menu" role="menu" aria-label="MenÃ¼" hidden>
          <a
            class="menu-item"
            role="menuitem"
            href="https://past0r3m.github.io/SimpleTimeTracker/"
            target="_blank"
            rel="noreferrer"
          >
            TimeTracker Ã¶ffnen
          </a>

          <button
            id="btnTheme"
            class="menu-item"
            role="menuitem"
            type="button"
            title="Theme umschalten"
          >
            Theme umschalten
          </button>
        </div>
      </div>
    </div>
  </header>

  <main class="layout">
    <section class="panel">
      <div class="panel-head">
        <div class="month-nav">
          <button id="btnPrev" class="icon-btn" aria-label="Vorheriger Monat">â€¹</button>
          <div class="month-title" id="monthTitle">â€”</div>
          <button id="btnNext" class="icon-btn" aria-label="NÃ¤chster Monat">â€º</button>
        </div>

        <div class="panel-tools">
          <label class="toggle">
            <input type="checkbox" id="toggleCountWeekends" />
            <span>Wochenenden zÃ¤hlen</span>
          </label>

          <label class="toggle">
            <input type="checkbox" id="toggleHighlightWeekends" checked />
            <span>Wochenenden markieren</span>
          </label>
        </div>
      </div>

      <div class="calendar">
        <div class="weekday-row" id="weekdayRow"></div>
        <div class="grid" id="calendarGrid"></div>
      </div>

      <div class="legend">
        <div class="pill pill-vac">Urlaub</div>
        <div class="pill pill-sick">Krank</div>
        <div class="pill pill-work">Arbeit</div>
        <div class="pill pill-ho">Homeoffice</div>
        <div class="pill pill-other">Sonstiges</div>
      </div>
    </section>

    <aside class="sidebar">
      <section class="card">
        <div class="card-head">
          <div class="card-title">Ãœbersicht</div>
          <div class="card-subtitle" id="summaryRange">â€”</div>
        </div>

        <div class="summary-grid">
          <div class="summary-item">
            <div class="k">Urlaubstage</div>
            <div class="v" id="sumVacation">0</div>
          </div>
          <div class="summary-item">
            <div class="k">Kranktage</div>
            <div class="v" id="sumSick">0</div>
          </div>
          <div class="summary-item">
            <div class="k">Arbeitstage</div>
            <div class="v" id="sumWork">0</div>
          </div>
          <div class="summary-item">
            <div class="k">Homeoffice</div>
            <div class="v" id="sumHO">0</div>
          </div>
          <div class="summary-item">
            <div class="k">Sonstiges</div>
            <div class="v" id="sumOther">0</div>
          </div>
        </div>

        <div class="card-actions">
          <select id="filterYear" class="select"></select>
          <select id="filterType" class="select">
            <option value="all">Alle Typen</option>
            <option value="vacation">Urlaub</option>
            <option value="sick">Krank</option>
            <option value="work">Arbeit</option>
            <option value="homeoffice">Homeoffice</option>
            <option value="other">Sonstiges</option>
          </select>
        </div>
      </section>

      <section class="card">
        <div class="card-head">
          <div class="card-title">EintrÃ¤ge</div>
          <div class="card-subtitle">Klick = Details Â· Editieren Â· LÃ¶schen</div>
        </div>

        <div id="entryList" class="list"></div>

        <div class="io">
          <button id="btnExportJSON" class="btn" type="button">Export JSON</button>
          <button id="btnImportJSON" class="btn" type="button">Import JSON</button>
          <input id="importFile" type="file" accept="application/json" hidden />
        </div>

        <div class="io">
          <button id="btnExportICS" class="btn" type="button">Export ICS</button>
        </div>
      </section>

      <section class="card">
        <div class="card-head">
          <div class="card-title">Hinweise</div>
        </div>
        <ul class="notes">
          <li>Alles lÃ¤uft offline; Daten bleiben im Browser (localStorage).</li>
          <li>Range zÃ¤hlt pro Tag; optional Wochenenden ein/aus.</li>
          <li>ICS-Export lÃ¤sst dich den Kram in Apple/Google/Outlook importieren.</li>
        </ul>
      </section>
    </aside>
  </main>

  <!-- Modal -->
  <dialog id="modal" class="modal">
    <form method="dialog" id="modalForm" class="modal-body">
      <div class="modal-head">
        <div class="modal-title" id="modalTitle">Neuer Eintrag</div>
        <button class="icon-btn" value="cancel" aria-label="SchlieÃŸen">âœ•</button>
      </div>

      <input type="hidden" id="entryId" />

      <div class="field">
        <label for="type">Typ</label>
        <select id="type" class="select">
          <option value="vacation">Urlaub</option>
          <option value="sick">Krank</option>
          <option value="work">Arbeit</option>
          <option value="homeoffice">Homeoffice</option>
          <option value="other">Sonstiges</option>
        </select>
      </div>

      <div class="field" id="workLinkWrap" style="display:none;">
        <label>Time Tracker</label>
        <a id="workLink" class="link-btn" href="https://past0r3m.github.io/SimpleTimeTracker/" target="_blank" rel="noreferrer">
          SimpleTimeTracker Ã¶ffnen
        </a>
      </div>

      <div class="field">
        <label for="title">Titel (optional)</label>
        <input id="title" class="input" type="text" placeholder="z.B. Sommerurlaub / Arzt / Arbeit / HO" maxlength="60" />
      </div>

      <div class="row">
        <div class="field">
          <label for="start">Von</label>
          <input id="start" class="input" type="date" required />
        </div>
        <div class="field">
          <label for="end">Bis</label>
          <input id="end" class="input" type="date" required />
        </div>
      </div>

      <div class="field">
        <label for="note">Notiz (optional)</label>
        <textarea id="note" class="textarea" rows="3" placeholder="z.B. Reise / GrÃ¼nde / Ticket-Nr."></textarea>
      </div>

      <div class="modal-foot">
        <button id="btnDelete" class="btn btn-danger" type="button">LÃ¶schen</button>
        <div class="spacer"></div>
        <button class="btn" value="cancel" type="button" id="btnCancel">Abbrechen</button>
        <button class="btn btn-primary" value="default" type="submit" id="btnSave">Speichern</button>
      </div>
    </form>
  </dialog>

  <script src="./app.js"></script>
</body>
</html>
